name: InAppStory

packages:
  - .
scripts:
  generate pigeons:
    description: Generate pigeons ğŸ•Š
    hooks:
      pre: echo `Generating all pigeons ğŸ•Šï¸`
      post: echo `Pigeons generated ğŸ•Š`
    steps:
      - flutter pub get
      - dart run pigeon --input pigeons/pigeon_generation.dart
      - dart run pigeon --input pigeons/pigeon_generation_private.dart
      - dart run pigeon --input pigeons/banner_place_generation.dart
      - dart run pigeon --input pigeons/checkout_generation.dart

  run pod install:
    description: Running pod install in examples
    steps:
      - cd example/ios
      - pod install --repo-update
      - cd ../../example_extended
      - pod install --repo-update
      - cd ../

  test publish:
    description: ğŸ§© Test build before publish ğŸ§©
    steps:
      - flutter clean
      - flutter pub get
      - cd example/ios
      - rm Podfile.lock
      - pod install --repo-update
      - cd ../
      - flutter build apk

  publish plugin:
    description: ğŸš€ Publishing plugin  ğŸš€
    steps:
      - flutter pub get
      - dart pub publish